<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8">
  <title>KAISSAVA - Profilim</title>
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  <style>
    body { background: #1e2530; color: #ffd700; font-family: 'Segoe UI', sans-serif;}
    .container { max-width: 420px; margin: 60px auto; background: #171b24; padding: 36px; border-radius: 16px; box-shadow: 0 4px 28px #0003;}
    h1 { text-align: center; margin-bottom: 32px;}
    .info { margin-bottom: 18px;}
    .back-btn { background: #222; color: #ffcc00; border: none; margin-top: 34px; padding: 10px 30px; border-radius: 10px; cursor: pointer;}
    .back-btn:hover { background: #333; }
  </style>
</head>
<body>
  <div class="container">
    <h1>Profilim</h1>
    <div class="info" id="profileInfo">Yükleniyor...</div>
    <button class="back-btn" onclick="location.href='index.html'">Ana Menü</button>
  </div>
  <script>
    // Telegram WebApp kullanıcı
    const tg = window.Telegram && window.Telegram.WebApp ? window.Telegram.WebApp : null;
    let userId = null;
    if (tg && tg.initDataUnsafe && tg.initDataUnsafe.user) {
      userId = tg.initDataUnsafe.user.id.toString();
      localStorage.setItem("kaissava_userid", userId);
    } else {
      userId = localStorage.getItem("kaissava_userid");
    }
    fetch('/api/user/' + userId)
      .then(res => res.json())
      .then(user => {
        document.getElementById('profileInfo').innerHTML = `
          <b>${user.name}</b> <br>
          Seviye: ${user.level}<br>
          Güç: ${user.power}<br>
          XP: ${user.xp}<br>
          Coin: ${user.coins}
        `;
      });
  </script>
</body>
</html>
